---
output: github_document
---

```{r setup}
library(data.table)
library(ggplot2)
```

# Running the model

# Computing reproductive number

```{r repnum}
rt <- list.files("saves", pattern = "reproductive", full.names = TRUE)
rt <- lapply(seq_along(rt), \(i) {cbind(id = i, fread(rt[i]))}) |>
    rbindlist()

rt <- rt[, .(rt = mean(rt)), by = c("id", "source_exposure_date")]
setorder(rt, source_exposure_date)


ggplot(rt, aes(x = source_exposure_date, y = rt)) +
    geom_jitter() +
    geom_smooth()
```

# Epi curves

```{r}
epicurves <- list.files("saves", pattern = "hist", full.names = TRUE)
epicurves <- lapply(seq_along(epicurves), \(i) {
    cbind(id = i, fread(epicurves[i]))
}) |> rbindlist()

# Proper names
epicurves[, status := factor(
    status, levels = c("Susceptible", "Exposed", "Infected", "Recovered", "Hospitalized", "Deseased"))]

ggplot(epicurves, aes(x = date, y = counts)) +
    geom_point(aes(colour = status))
    # geom_smooth(aes(colour = status))
```

